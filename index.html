<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Co Down Toddler Events</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700&display=swap" rel="stylesheet">
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --toddler-bg: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      --toddler-accent: #f093fb;
      --adult-bg: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
      --adult-accent: #43e97b;
      --open-color: #10b981;
      --closed-color: #ef4444;
      --bg-light: #fef3f9;
      --text-dark: #1f2937;
      --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    }

    body {
      font-family: 'Fredoka', sans-serif;
      background: var(--bg-light);
      color: var(--text-dark);
      line-height: 1.6;
      min-height: 100vh;
      -webkit-font-smoothing: antialiased;
    }

    .skip-link {
      position: absolute;
      top: -40px;
      left: 0;
      background: #000;
      color: #fff;
      padding: 0.5rem 1rem;
      text-decoration: none;
      z-index: 100;
    }

    .skip-link:focus {
      top: 0;
    }

    .container {
      max-width: 60rem;
      margin: 0 auto;
      padding: 1rem;
    }

    header {
      text-align: center;
      padding: 2rem 1rem;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
      color: white;
      border-radius: 0 0 2rem 2rem;
      box-shadow: var(--shadow-lg);
      margin-bottom: 2rem;
    }

    h1 {
      font-size: clamp(1.75rem, 5vw, 2.5rem);
      font-weight: 700;
      margin-bottom: 0.5rem;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
    }

    .subtitle {
      font-size: 1rem;
      opacity: 0.95;
      font-weight: 400;
    }

    /* Filter Toggle */
    .filter-section {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 1rem;
      margin-bottom: 2rem;
      padding: 1rem;
      background: white;
      border-radius: 1rem;
      box-shadow: var(--shadow);
    }

    .filter-label {
      font-weight: 600;
      font-size: 1.1rem;
    }

    .toggle-switch {
      position: relative;
      display: inline-block;
      width: 60px;
      height: 34px;
    }

    .toggle-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      transition: 0.3s;
      border-radius: 34px;
      border: 3px solid transparent;
    }

    .slider:before {
      position: absolute;
      content: "";
      height: 24px;
      width: 24px;
      left: 3px;
      bottom: 2px;
      background-color: white;
      transition: 0.3s;
      border-radius: 50%;
    }

    input:checked + .slider {
      background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
    }

    input:focus-visible + .slider {
      outline: 3px solid #667eea;
      outline-offset: 2px;
    }

    input:checked + .slider:before {
      transform: translateX(26px);
    }

    .filter-mode {
      font-weight: 600;
      min-width: 120px;
      text-align: center;
      font-size: 1.1rem;
    }

    /* Date Navigation */
    .date-nav {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      margin-bottom: 2rem;
      background: white;
      padding: 1.5rem;
      border-radius: 1rem;
      box-shadow: var(--shadow);
    }

    .current-date {
      font-size: 1.5rem;
      font-weight: 700;
      text-align: center;
      color: #667eea;
    }

    .nav-buttons {
      display: flex;
      gap: 0.75rem;
      justify-content: center;
      flex-wrap: wrap;
    }

    button {
      font-family: 'Fredoka', sans-serif;
      padding: 0.75rem 1.5rem;
      border: none;
      border-radius: 0.75rem;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      min-height: 44px;
      min-width: 44px;
      box-shadow: var(--shadow);
    }

    button:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-lg);
    }

    button:active {
      transform: translateY(0);
    }

    button:focus-visible {
      outline: 3px solid #667eea;
      outline-offset: 2px;
    }

    .btn-prev, .btn-next {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      flex: 1;
      max-width: 150px;
    }

    .btn-today {
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      color: white;
      padding: 0.75rem 2rem;
    }

    .btn-today.is-today {
      background: #e5e7eb;
      color: #6b7280;
      cursor: default;
    }

    .btn-today.is-today:hover {
      transform: none;
      box-shadow: var(--shadow);
    }

    /* Events Grid */
    .events-container {
      display: grid;
      gap: 1.25rem;
      margin-bottom: 2rem;
    }

    @media (min-width: 40rem) {
      .events-container {
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      }
    }

    .event-card {
      background: white;
      border-radius: 1.25rem;
      padding: 1.5rem;
      box-shadow: var(--shadow);
      transition: all 0.3s;
      border: 3px solid transparent;
      position: relative;
      overflow: hidden;
    }

    .event-card:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-lg);
    }

    .event-card.toddler {
      border-color: #f093fb;
    }

    .event-card.adult {
      border-color: #43e97b;
    }

    .event-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 6px;
    }

    .event-card.toddler::before {
      background: var(--toddler-bg);
    }

    .event-card.adult::before {
      background: var(--adult-bg);
    }

    .event-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 1rem;
      margin-bottom: 1rem;
    }

    .event-name {
      font-size: 1.35rem;
      font-weight: 700;
      color: var(--text-dark);
      flex: 1;
    }

    .category-badge {
      padding: 0.35rem 0.85rem;
      border-radius: 1rem;
      font-size: 0.85rem;
      font-weight: 600;
      white-space: nowrap;
      display: flex;
      align-items: center;
      gap: 0.35rem;
    }

    .category-badge.toddler {
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      color: white;
    }

    .category-badge.adult {
      background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
      color: #1f2937;
    }

    .badge-icon {
      font-size: 1rem;
    }

    .status-indicator {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.5rem 1rem;
      border-radius: 0.5rem;
      font-weight: 600;
      margin-bottom: 1rem;
      font-size: 0.95rem;
    }

    .status-indicator.open {
      background: #d1fae5;
      color: #065f46;
    }

    .status-indicator.closed {
      background: #fee2e2;
      color: #991b1b;
    }

    .status-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      animation: pulse 2s infinite;
    }

    .status-indicator.open .status-dot {
      background: var(--open-color);
    }

    .status-indicator.closed .status-dot {
      background: var(--closed-color);
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    .time-slots {
      margin-bottom: 1.25rem;
    }

    .time-slot {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.6rem 0;
      font-size: 1.05rem;
      color: #4b5563;
    }

    .time-icon {
      font-size: 1.1rem;
    }

    .closed-message {
      color: #6b7280;
      font-style: italic;
      padding: 1rem;
      background: #f3f4f6;
      border-radius: 0.5rem;
      text-align: center;
      margin-bottom: 1rem;
    }

    .event-link {
      display: block;
      text-align: center;
      padding: 0.85rem 1.5rem;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      text-decoration: none;
      border-radius: 0.75rem;
      font-weight: 600;
      transition: all 0.2s;
      min-height: 44px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
    }

    .event-link:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-lg);
    }

    .event-link:focus-visible {
      outline: 3px solid #667eea;
      outline-offset: 2px;
    }

    .link-icon {
      font-size: 1.1rem;
    }

    .no-events {
      text-align: center;
      padding: 3rem 1.5rem;
      background: white;
      border-radius: 1rem;
      box-shadow: var(--shadow);
    }

    .no-events-icon {
      font-size: 4rem;
      margin-bottom: 1rem;
    }

    .no-events-text {
      font-size: 1.25rem;
      color: #6b7280;
    }

    footer {
      text-align: center;
      padding: 2rem 1rem;
      color: #6b7280;
      font-size: 0.9rem;
    }

    /* Accessibility - Reduced Motion */
    @media (prefers-reduced-motion: reduce) {
      * {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
      }
    }

    /* Ensure readability at 320px */
    @media (max-width: 20rem) {
      .container {
        padding: 0.5rem;
      }
      
      h1 {
        font-size: 1.5rem;
      }
      
      .event-card {
        padding: 1rem;
      }
    }
  </style>
</head>
<body>
  <a href="#main-content" class="skip-link">Skip to main content</a>

  <div id="app">
    <header>
      <h1>üéà Co Down Toddler Events</h1>
      <p class="subtitle">Your guide to fun activities around County Down</p>
    </header>

    <div class="container">
      <!-- Filter Toggle -->
      <section class="filter-section" aria-label="Event filter">
        <span class="filter-label">Filter:</span>
        <label class="toggle-switch">
          <input 
            type="checkbox" 
            v-model="showAllEvents"
            aria-label="Toggle between toddler events and all events"
          >
          <span class="slider"></span>
        </label>
        <span class="filter-mode">{{ showAllEvents ? 'üåü All Events' : 'üë∂ Toddler Events' }}</span>
      </section>

      <!-- Date Navigation -->
      <nav class="date-nav" aria-label="Date navigation">
        <div class="current-date" role="status" aria-live="polite">
          {{ formattedDate }}
        </div>
        <div class="nav-buttons">
          <button 
            @click="previousDay" 
            class="btn-prev"
            aria-label="Previous day"
          >
            ‚Üê Previous
          </button>
          <button 
            @click="goToToday" 
            class="btn-today"
            :class="{ 'is-today': isToday }"
            :disabled="isToday"
            aria-label="Go to today"
          >
            {{ isToday ? "Today" : "üìç Today" }}
          </button>
          <button 
            @click="nextDay" 
            class="btn-next"
            aria-label="Next day"
          >
            Next ‚Üí
          </button>
        </div>
      </nav>

      <!-- Events List -->
      <main id="main-content">
        <div v-if="filteredEvents.length > 0" class="events-container">
          <article 
            v-for="event in filteredEvents" 
            :key="event.name"
            class="event-card"
            :class="event.category"
          >
            <div class="event-header">
              <h2 class="event-name">{{ event.name }}</h2>
              <span class="category-badge" :class="event.category">
                <span class="badge-icon" aria-hidden="true">{{ event.category === 'toddler' ? 'üë∂' : 'üë®‚Äçüë©‚Äçüëß' }}</span>
                <span>{{ event.category === 'toddler' ? 'Toddler' : 'Adult' }}</span>
              </span>
            </div>

            <div v-if="event.todaySchedule">
              <div 
                class="status-indicator"
                :class="isOpenNow(event) ? 'open' : 'closed'"
                role="status"
              >
                <span class="status-dot" aria-hidden="true"></span>
                {{ isOpenNow(event) ? 'Open Now' : 'Closed Now' }}
              </div>

              <div class="time-slots">
                <div 
                  v-for="(slot, index) in event.todaySchedule" 
                  :key="index"
                  class="time-slot"
                >
                  <span class="time-icon" aria-hidden="true">üïê</span>
                  <span>{{ slot.start }} - {{ slot.end }}</span>
                </div>
              </div>
            </div>

            <div v-else class="closed-message">
              Closed {{ dayName }}
            </div>

            <a 
              :href="event.url || '#'" 
              class="event-link"
              target="_blank"
              rel="noopener noreferrer"
              :aria-label="'Visit ' + event.name + ' website'"
            >
              <span>{{ event.url ? 'Book / View Info' : 'Link Coming Soon' }}</span>
              <span class="link-icon" aria-hidden="true">‚Üí</span>
            </a>
          </article>
        </div>

        <div v-else class="no-events">
          <div class="no-events-icon" aria-hidden="true">üò¥</div>
          <p class="no-events-text">No events available {{ dayName }}</p>
        </div>
      </main>

      <footer>
        <p>üíú Made with love for Co Down families</p>
        <p>Times shown in UK timezone ‚Ä¢ Last updated {{ lastUpdated }}</p>
      </footer>
    </div>
  </div>

  <script type="module">
    import { createApp, ref, computed, onMounted, onUnmounted } from 'https://unpkg.com/vue@3/dist/vue.esm-browser.js'

    createApp({
      setup() {
        // Events data - ADD NEW EVENTS HERE
        const events = [
          {
            name: 'Newry Leisure Swimming (Learner Pool)',
            url: '', // Add URL later
            category: 'toddler',
            schedule: [
              { days: [1, 5], times: [{ start: '09:30', end: '21:00' }] }, // Mon, Fri
              { days: [3], times: [{ start: '09:30', end: '14:00' }, { start: '15:00', end: '21:00' }] }, // Wed
              { days: [2, 4], times: [{ start: '09:30', end: '21:00' }] }, // Tue, Thu
              { days: [6], times: [{ start: '09:00', end: '16:00' }] }, // Sat
              { days: [0], times: [{ start: '13:00', end: '17:00' }] }  // Sun
            ]
          },
          {
            name: 'Newry Soft Play',
            url: '', // Add URL later
            category: 'toddler',
            schedule: [
              { days: [1, 2, 3, 4], times: [{ start: '09:00', end: '20:00' }] }, // Mon-Thu
              { days: [5], times: [{ start: '09:00', end: '15:30' }, { start: '17:30', end: '20:00' }] }, // Fri
              { days: [6], times: [{ start: '09:00', end: '11:00' }, { start: '15:00', end: '17:00' }] }, // Sat
              { days: [0], times: [{ start: '10:00', end: '13:00' }, { start: '15:00', end: '17:00' }] }  // Sun
            ]
          },
          {
            name: 'Tiddly Town Newry',
            url: '', // Add URL later
            category: 'toddler',
            schedule: [
              { days: [1, 3, 4, 5, 6, 0], times: [
                { start: '10:00', end: '11:30' },
                { start: '12:15', end: '13:45' },
                { start: '14:30', end: '16:00' }
              ]}
            ]
          },
          {
            name: 'Cheeky Monkeys (Sheepbridge)',
            url: '', // Add URL later
            category: 'toddler',
            schedule: [
              { days: [4], times: [{ start: '10:00', end: '18:00' }] }, // Thu (6pm-8pm private)
              { days: [5], times: [{ start: '10:00', end: '19:30' }] }, // Fri
              { days: [6, 0], times: [{ start: '11:00', end: '18:30' }] }  // Sat, Sun
            ]
          },
          {
            name: 'Cheeky Monkeys Parent & Toddler',
            url: '', // Add URL later
            category: 'toddler',
            schedule: [
              { days: [4, 5], times: [{ start: '10:00', end: '11:30' }] } // Thu, Fri mornings
            ]
          },
          {
            name: 'Infinity Adventure Park (Toddler Mornings)',
            url: 'https://infinityadventure.co.uk/astronaut-academy-adventure-park/',
            category: 'toddler',
            schedule: [
              { days: [2], times: [{ start: '10:00', end: '12:00' }] }, // Tue
              { days: [5], times: [{ start: '10:00', end: '12:00' }] }, // Fri
              { days: [6], times: [{ start: '10:00', end: '11:00' }] }, // Sat
              { days: [0], times: [{ start: '11:00', end: '12:00' }] }  // Sun
            ]
          },
          {
            name: 'Newry Health Suite',
            url: 'https://www.newrymournedown.org/newry-leisure-centre-cecil-street',
            category: 'adult',
            schedule: [
              { days: [1, 5], times: [{ start: '06:30', end: '21:00' }] }, // Mon, Fri
              { days: [3], times: [{ start: '06:30', end: '14:00' }, { start: '15:00', end: '21:00' }] }, // Wed
              { days: [2, 4], times: [{ start: '10:30', end: '21:00' }] }, // Tue, Thu
              { days: [6], times: [{ start: '09:00', end: '16:00' }] }, // Sat
              { days: [0], times: [{ start: '13:00', end: '17:00' }] }  // Sun
            ]
          }
        ]

        // Reactive state
        const currentDate = ref(new Date())
        const showAllEvents = ref(false)
        const now = ref(new Date())
        let intervalId = null

        // Load filter preference from localStorage
        onMounted(() => {
          const saved = localStorage.getItem('showAllEvents')
          if (saved !== null) {
            showAllEvents.value = JSON.parse(saved)
          }
          
          // Update current time every minute for live open/closed status
          intervalId = setInterval(() => {
            now.value = new Date()
          }, 60000)
        })

        onUnmounted(() => {
          if (intervalId) clearInterval(intervalId)
        })

        // Watch filter changes and save to localStorage
        const unwatchFilter = computed(() => {
          localStorage.setItem('showAllEvents', JSON.stringify(showAllEvents.value))
          return showAllEvents.value
        })

        // Get UK timezone date string
        const getUKDateString = (date) => {
          return date.toLocaleDateString('en-GB', { 
            timeZone: 'Europe/London',
            year: 'numeric',
            month: '2-digit',
            day: '2-digit'
          })
        }

        // Check if selected date is today in UK timezone
        const isToday = computed(() => {
          const todayUK = getUKDateString(new Date())
          const selectedUK = getUKDateString(currentDate.value)
          return todayUK === selectedUK
        })

        // Format displayed date
        const formattedDate = computed(() => {
          return currentDate.value.toLocaleDateString('en-GB', {
            timeZone: 'Europe/London',
            weekday: 'long',
            year: 'numeric',
            month: 'long',
            day: 'numeric'
          })
        })

        // Get day name for messages
        const dayName = computed(() => {
          return currentDate.value.toLocaleDateString('en-GB', {
            timeZone: 'Europe/London',
            weekday: 'long'
          })
        })

        // Get day of week (0 = Sunday, 6 = Saturday)
        const currentDayOfWeek = computed(() => {
          // Create date string in UK timezone and parse to get correct day
          const ukDateStr = currentDate.value.toLocaleDateString('en-GB', {
            timeZone: 'Europe/London'
          })
          const [day, month, year] = ukDateStr.split('/')
          const ukDate = new Date(year, month - 1, day)
          return ukDate.getDay()
        })

        // Get today's schedule for an event
        const getTodaySchedule = (event) => {
          const dayOfWeek = currentDayOfWeek.value
          for (const schedule of event.schedule) {
            if (schedule.days.includes(dayOfWeek)) {
              return schedule.times
            }
          }
          return null
        }

        // Check if event is open now
        const isOpenNow = (event) => {
          if (!isToday.value || !event.todaySchedule) return false

          const nowUK = new Date().toLocaleString('en-GB', {
            timeZone: 'Europe/London',
            hour12: false
          })
          
          // Extract time portion (HH:mm)
          const timeMatch = nowUK.match(/(\d{2}):(\d{2})/)
          if (!timeMatch) return false
          
          const currentMinutes = parseInt(timeMatch[1]) * 60 + parseInt(timeMatch[2])

          for (const slot of event.todaySchedule) {
            const [startHour, startMin] = slot.start.split(':').map(Number)
            const [endHour, endMin] = slot.end.split(':').map(Number)
            const startMinutes = startHour * 60 + startMin
            const endMinutes = endHour * 60 + endMin

            if (currentMinutes >= startMinutes && currentMinutes < endMinutes) {
              return true
            }
          }
          
          return false
        }

        // Filter events based on category and current day
        const filteredEvents = computed(() => {
          let filtered = events

          // Filter by category
          if (!showAllEvents.value) {
            filtered = filtered.filter(e => e.category === 'toddler')
          }

          // Add today's schedule to each event
          return filtered.map(event => ({
            ...event,
            todaySchedule: getTodaySchedule(event)
          }))
        })

        // Navigation functions
        const previousDay = () => {
          const newDate = new Date(currentDate.value)
          newDate.setDate(newDate.getDate() - 1)
          currentDate.value = newDate
        }

        const nextDay = () => {
          const newDate = new Date(currentDate.value)
          newDate.setDate(newDate.getDate() + 1)
          currentDate.value = newDate
        }

        const goToToday = () => {
          currentDate.value = new Date()
        }

        // Last updated date
        const lastUpdated = 'February 2026'

        return {
          currentDate,
          showAllEvents,
          formattedDate,
          dayName,
          isToday,
          filteredEvents,
          previousDay,
          nextDay,
          goToToday,
          isOpenNow,
          lastUpdated
        }
      }
    }).mount('#app')
  </script>
</body>
</html>
